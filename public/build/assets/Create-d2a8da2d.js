import{d as i,m as E,T as L,p as V,l as H,o as u,c as J,w as h,a as e,q as K,s as U,v as I,u as o,n as v,e as m,t as y,h as x,b as B,f as w,E as Q,C as N,x as W,y as X}from"./app-8d0782cb.js";import{_ as Y}from"./AppLayout-896319c9.js";import{s as P}from"./vue-multiselect-6f44508e.js";import{w as Z,e as d,v as ee}from"./Index-5047bcfe.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";const n=f=>(W("data-v-d6845327"),f=f(),X(),f),te=n(()=>e("h2",{class:"text-lg font-semibold leading-6 text-gray-900"}," Add Pet ",-1)),oe={class:"max-w-full bg-white p-5 rounded-md"},ae=["onSubmit"],le={class:"grid grid-cols-12 gap-5"},de={class:"col-span-6"},ne=n(()=>e("label",{for:"name",class:"mb-2 block text-sm font-medium text-gray-700"},"Name",-1)),ie={key:0,class:"text-sm text-red-500 mt-1"},re={class:"col-span-6"},ce=n(()=>e("label",{for:"client_id",class:"mb-2 block text-sm font-medium text-gray-700"},"Client",-1)),ue={key:0,class:"text-sm text-red-500 mt-1"},pe={class:"col-span-12 sm:col-span-6"},me=n(()=>e("label",{for:"species",class:"mb-2 block text-sm font-medium text-gray-700"},"Species",-1)),_e={key:0,class:"text-sm text-red-500 mt-1"},he={class:"col-span-12 sm:col-span-6"},fe=n(()=>e("label",{for:"breed",class:"mb-2 block text-sm font-medium text-gray-700"},"Breed",-1)),ge={class:"col-span-8 sm:col-span-10"},be=n(()=>e("label",{for:"gender",class:"mb-2 block text-sm font-medium text-gray-700"},"Gender",-1)),ve=n(()=>e("option",{disabled:"",selected:""},"Select Gender",-1)),ye=n(()=>e("option",{value:"male"},"Male",-1)),xe=n(()=>e("option",{value:"female"},"Female",-1)),we=n(()=>e("option",{value:"none"},"None",-1)),ke=[ve,ye,xe,we],Se={class:"col-span-4 sm:col-span-2"},Ce=n(()=>e("label",{for:"age",class:"mb-2 block text-sm font-medium text-gray-700"},"Age",-1)),Ve={class:"col-span-12"},Ue={class:"mx-auto max-w-full"},Be=n(()=>e("label",{for:"photo",class:"mb-2 block text-sm font-medium text-gray-700"},"Pet Photo",-1)),Ne={class:"space-y-1 text-center"},Pe={class:"mx-auto inline-flex h-20 w-20 items-center justify-center rounded-full bg-gray-100"},Te=["src"],Ae={key:1},Fe=n(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 text-gray-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})],-1)),Ie=[Fe],Me=n(()=>e("div",{class:"text-gray-600"},[e("a",{href:"#",class:"font-medium text-indigo-500 hover:text-indigo-700"},"Click to upload"),w(" or drag and drop ")],-1)),je=n(()=>e("p",{class:"text-sm text-gray-500"},"PNG or JPG (max. 1mb)",-1)),Oe={key:0,class:"text-sm text-red-500 mt-1"},qe={class:"col-span-12"},De=["disabled"],Ge={__name:"Create",setup(f){const g=i(!1),c=i(null),k=i([]),r=i(null),p=i(null),S=i([]),C=i([]),b=i(!1),_=i(null),T=E(),s=L({name:"",species_id:"",breed_id:"",age:"",gender:"",photo:null,client_id:""}),M=()=>{s.name="",s.species_id="",s.breed_id="",s.age="",s.gender="",s.photo=null,s.client_id="",c.value=null,r.value=null,p.value=null,_.value=null},j=async()=>{const t=await axios.get("/pets/fetchAllClients");k.value=t.data.slice(0,10)},O=async()=>{const t=await axios.get("/pets/fetchAllSpecies");S.value=t.data,await N()},q=async()=>{b.value=!0;const t=await axios.get("/pets/fetchAllBreeds");C.value=t.data,await N(),b.value=!1},A=()=>{c.value&&(d.client_id=[],s.client_id=c.value.id)};V(c,()=>{c.value&&A()}),V(r,async()=>{r.value?(F(),z(r.value.id)):console.log("No species selected")}),V(p,()=>{p.value&&(s.breed_id=p.value.id)}),H(async()=>{await j(),await O(),await q(),Z(s),d.value={}});const D=t=>{_.value=t.target.files[0],_.value&&(s.photo={file:_.value,url:URL.createObjectURL(_.value)})},G=async t=>{const l=(await axios.get(`/pets/users?name=${t}`)).data;k.value=l.slice(0,10)},$=async()=>{if(g.value=!0,ee(s),Object.keys(d.value).length>0){T.error("Please correct the errors in the form."),g.value=!1;return}const t=new FormData;t.append("name",s.name),t.append("species_id",s.species_id),t.append("breed_id",s.breed_id),t.append("age",s.age),t.append("gender",s.gender),s.photo&&s.photo.file instanceof File&&t.append("photo",s.photo.file),t.append("client_id",s.client_id);const a=await axios.post("/pets/store",t,{headers:{"Content-Type":"multipart/form-data"}});M(),T.success(a.data.message),g.value=!1},R=async t=>{const l=(await axios.get(`/pets/species?name=${t}`)).data;S.value=l.slice(0,10)},F=()=>{r.value&&(d.species_id=[],s.species_id=r.value.id)},z=async t=>{b.value=!0;const l=(await axios.get(`/pets/breeds?species_id=${t}`)).data;C.value=l,await N(),b.value=!1};return(t,a)=>(u(),J(Y,{title:"Add Pet"},{header:h(()=>[te]),default:h(()=>[e("div",oe,[e("form",{onSubmit:K($,["prevent"]),enctype:"multipart/form-data",class:"space-y-5"},[e("div",le,[e("div",de,[ne,U(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>o(s).name=l),type:"text",id:"name",class:v(["block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-700 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500 placeholder:text-sm",{"border-red-500 focus:border-red-500 focus:ring-red-500":o(d).name}]),placeholder:"Pet Name"},null,2),[[I,o(s).name]]),o(d).name?(u(),m("div",ie,y(o(d).name),1)):x("",!0)]),e("div",re,[ce,B(o(P),{modelValue:c.value,"onUpdate:modelValue":a[1]||(a[1]=l=>c.value=l),class:v({error:o(d).client_id}),options:k.value,multiple:!1,"clear-on-select":!0,placeholder:"Type to search",label:"name","track-by":"id",onSearchChange:G,onInput:A},{noUser:h(()=>[w(" Oops! No users found. Try a different search query. ")]),_:1},8,["modelValue","class","options"]),o(d).client_id?(u(),m("div",ue,y(o(d).client_id),1)):x("",!0)]),e("div",pe,[me,B(o(P),{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value=l),class:v({error:o(d).species_id}),options:S.value,multiple:!1,"clear-on-select":!0,placeholder:"Type to search",label:"name","track-by":"id",onSearchChange:R,onInput:F},{noSpecies:h(()=>[w(" Oops! No species found. Try a different search query. ")]),_:1},8,["modelValue","class","options"]),o(d).species_id?(u(),m("div",_e,y(o(d).species_id),1)):x("",!0)]),e("div",he,[fe,B(o(P),{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=l=>p.value=l),options:C.value,multiple:!1,"clear-on-select":!0,placeholder:"Type to search",label:"name","track-by":"id"},{noResult1:h(()=>[w(" Oops! No breeds found. Try a different search query. ")]),_:1},8,["modelValue","options"])]),e("div",ge,[be,U(e("select",{"onUpdate:modelValue":a[4]||(a[4]=l=>o(s).gender=l),id:"gender",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-700 disabled:cursor-not-allowed disabled:bg-gray-50"},ke,512),[[Q,o(s).gender]])]),e("div",Se,[Ce,U(e("input",{"onUpdate:modelValue":a[5]||(a[5]=l=>o(s).age=l),type:"number",id:"age",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",placeholder:"1"},null,512),[[I,o(s).age]])]),e("div",Ve,[e("div",Ue,[Be,e("label",{class:v(["flex w-full cursor-pointer appearance-none items-center justify-center rounded-md border-2 border-dashed border-gray-200 p-6 transition-all hover:border-indigo-700",{"border-red-500 focus:border-red-500 focus:ring-red-500":o(d).photo}])},[e("div",Ne,[e("div",Pe,[o(s).photo?(u(),m("img",{key:0,src:o(s).photo.url,alt:"Pet Photo",class:"h-20 w-20 rounded-full"},null,8,Te)):(u(),m("div",Ae,Ie))]),Me,je]),e("input",{onChange:D,id:"photo",name:"photo",type:"file",class:"sr-only"},null,32)],2),o(d).photo?(u(),m("div",Oe,y(o(d).photo),1)):x("",!0)])]),e("div",qe,[e("button",{type:"submit",disabled:g.value,class:"w-full rounded-lg border border-indigo-700 bg-indigo-700 px-8 py-4 text-center text-lg font-medium text-white shadow-sm transition-all hover:border-indigo-800 hover:bg-indigo-800 disabled:cursor-not-allowed disabled:border-indigo-300 disabled:bg-indigo-300"}," Add Pet ",8,De)])])],40,ae)])]),_:1}))}},He=se(Ge,[["__scopeId","data-v-d6845327"]]);export{He as default};
