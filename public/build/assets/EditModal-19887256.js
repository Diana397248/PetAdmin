import{d as D,m as F,T,p as w,l as V,o as p,c as B,w as n,b as c,u as t,a as i,q as I,s as g,v as f,n as _,e as b,t as x,h,f as M,x as N,y as z}from"./app-8d0782cb.js";import{s as $}from"./vue-multiselect-6f44508e.js";import{w as q,e as s,v as C}from"./Index-1229535b.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import{r as H}from"./TrashIcon-5e570acf.js";import{h as E,G as P,V as W,U as J,S as K}from"./transition-84619d3a.js";import"./micro-task-cadf959b.js";const l=m=>(N("data-v-b815ec14"),m=m(),z(),m),L=l(()=>i("div",{class:"fixed inset-0 bg-black/25"},null,-1)),Q={class:"fixed inset-0 overflow-y-auto"},R={class:"flex min-h-full items-center justify-center p-4 text-center"},X=l(()=>i("div",null,"Edit Event",-1)),Y=["onSubmit"],Z={class:"grid gap-4 mb-4 grid-cols-2"},ee={class:"col-span-2"},te=l(()=>i("label",{for:"title",class:"block mb-2 text-xs font-medium text-gray-500 dark:text-white"},"Title",-1)),ie={key:0,class:"text-sm text-red-500 mt-1"},se={class:"col-span-2"},oe=l(()=>i("label",{for:"client",class:"block mb-2 text-xs font-medium text-gray-500 dark:text-white"},"Client",-1)),ae={key:0,class:"text-sm text-red-500 mt-1"},re={class:"col-span-2 sm:col-span-1"},de=l(()=>i("label",{for:"start_time",class:"block mb-2 text-xs font-medium text-gray-500 dark:text-white"},"Start Date",-1)),le={key:0,class:"text-sm text-red-500 mt-1"},ne={class:"col-span-2 sm:col-span-1"},ce=l(()=>i("label",{for:"end_time",class:"block mb-2 text-xs font-medium text-gray-500 dark:text-white"},"End Date",-1)),me={key:0,class:"text-sm text-red-500 mt-1"},ue={class:"col-span-2"},pe=l(()=>i("label",{for:"description",class:"block mb-2 text-xs font-medium text-gray-500 dark:text-white"},"Description",-1)),ge=l(()=>i("div",{class:"flex justify-between"},[i("button",{type:"submit",class:"text-white inline-flex items-center bg-indigo-700 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-indigo-600 dark:hover:bg-indigo-700 dark:focus:ring-indigo-800"},[i("svg",{class:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[i("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})]),M(" Update Event ")])],-1)),fe={__name:"EditModal",props:{isEditModalOpen:Boolean,calendarOptions:Object,selectedClient:Object,fetchAllAppointments:Function,fetchAllClients:Function,searchClients:Function,matchingClients:Object,editData:Object},emits:["closeEditModal"],setup(m,{emit:S}){const r=D([]),y=F(),A=S,u=m,e=T({title:"",client_id:"",start_time:"",end_time:"",description:""}),O=()=>{e.title="",e.client_id="",e.start_time="",e.end_time="",e.description="",r.value=null},v=()=>{A("closeEditModal"),s.value={},r.value=null};w(()=>u.editData,o=>{o&&(e.id=o.id,e.title=o.title,e.client_id=o.client_id,e.start_time=o.start_time,e.end_time=o.end_time,e.description=o.description,r.value=o.client)},{immediate:!0});const U=async()=>{if(C(e),Object.keys(s.value).length>0){y.error("Please correct the errors in the form.");return}const o={title:e.title,client_id:r.value.id,start_time:e.start_time,end_time:e.end_time,description:e.description};await axios.put(`/appointments/${e.id}`,o),u.fetchAllAppointments(),v(),O(),y.success("Appointment created successfully!")},j=async o=>{await axios.delete(`/appointments/${o}`),u.fetchAllAppointments(),v(),y.success("Appointment deleted successfully!")},k=()=>{r.value&&(s.value.client_id=[],e.client_id=r.value.id)};return w(r,()=>{r.value?k():e.client_id=null,C(e)}),V(async()=>{await u.fetchAllClients(),q(e)}),(o,a)=>(p(),B(t(K),{appear:"",show:m.isEditModalOpen,as:"template"},{default:n(()=>[c(t(J),{as:"div",onClose:v,class:"relative z-10"},{default:n(()=>[c(t(E),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[L]),_:1}),i("div",Q,[i("div",R,[c(t(E),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[c(t(P),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:n(()=>[c(t(W),{as:"h3",class:"flex justify-between items-center text-lg font-medium leading-6 text-gray-900"},{default:n(()=>[X,i("button",{onClick:a[0]||(a[0]=d=>j(t(e).id)),class:"inline-flex items-center text-red-700 hover:text-red-900 font-medium rounded-lg text-sm py-2.5 text-center"},[c(t(H),{class:"w-6 h-6"})])]),_:1}),i("form",{onSubmit:I(U,["prevent"]),class:"py-5"},[i("div",Z,[i("div",ee,[te,g(i("input",{"onUpdate:modelValue":a[1]||(a[1]=d=>t(e).title=d),type:"text",name:"title",id:"title",class:_(["bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-600 focus:border-indigo-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",t(s).title?"border-red-500":"border-gray-300"]),placeholder:"Type event title"},null,2),[[f,t(e).title]]),t(s).title?(p(),b("div",ie,x(t(s).title),1)):h("",!0)]),i("div",se,[oe,c(t($),{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=d=>r.value=d),options:u.matchingClients,multiple:!1,"clear-on-select":!0,placeholder:"Type to search",label:"name","track-by":"id",onSearchChange:u.searchClients,onInput:k,class:_({error:t(s).client_id})},{noUser:n(()=>[M(" Oops! No users found. Try a different search query. ")]),_:1},8,["modelValue","options","onSearchChange","class"]),t(s).client_id?(p(),b("div",ae,x(t(s).client_id),1)):h("",!0)]),i("div",re,[de,g(i("input",{"onUpdate:modelValue":a[3]||(a[3]=d=>t(e).start_time=d),type:"datetime-local",name:"start_time",id:"start_time",class:_(["bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-600 focus:border-indigo-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",t(s).start_time?"border-red-500":"border-gray-300"])},null,2),[[f,t(e).start_time]]),t(s).start_time?(p(),b("div",le,x(t(s).start_time),1)):h("",!0)]),i("div",ne,[ce,g(i("input",{"onUpdate:modelValue":a[4]||(a[4]=d=>t(e).end_time=d),type:"datetime-local",name:"end_time",id:"end_time",class:_(["bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-600 focus:border-indigo-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",t(s).end_time?"border-red-500":"border-gray-300"])},null,2),[[f,t(e).end_time]]),t(s).end_time?(p(),b("div",me,x(t(s).end_time),1)):h("",!0)]),i("div",ue,[pe,g(i("textarea",{"onUpdate:modelValue":a[5]||(a[5]=d=>t(e).description=d),id:"description",rows:"4",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-indigo-500 dark:focus:border-indigo-500",placeholder:"Write event description here"},null,512),[[f,t(e).description]])])]),ge],40,Y)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},we=G(fe,[["__scopeId","data-v-b815ec14"]]);export{we as default};
