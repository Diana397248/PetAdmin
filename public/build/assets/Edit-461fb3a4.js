import{d as p,m as Y,Q as Z,G as ee,p as I,l as te,o as f,c as O,w as n,a as e,t as x,u as s,q as N,s as M,v as R,n as w,e as b,h as C,b as d,f as B,E as se,g as oe,F as ae,C as U,x as le,y as ie}from"./app-8d0782cb.js";import{_ as de}from"./AppLayout-896319c9.js";import{s as A}from"./vue-multiselect-6f44508e.js";import ne from"./VaccinationsForm-bcbe3fed.js";import re from"./MedicationsForm-db6a0496.js";import ce from"./MedicalHistoriesForm-ee611fa6.js";import ue from"./SurgicalHistoriesForm-a506d254.js";import pe from"./Gallery-b6ef883b.js";import{e as r,w as me,v as _e}from"./Index-5047bcfe.js";import{_ as fe}from"./_plugin-vue_export-helper-c27b6911.js";import{I as he,y as ge,S as ve,g as k,x as be}from"./tabs-b96fbb2e.js";import"./moment-fbc5633a.js";import"./PlusIcon-d843c3af.js";import"./TrashIcon-5e570acf.js";import"./transition-84619d3a.js";import"./micro-task-cadf959b.js";const c=y=>(le("data-v-5cdad304"),y=y(),ie(),y),xe={class:"text-lg font-semibold leading-6 text-gray-900"},ye={class:"max-w-full bg-white p-5 rounded-md"},we=["onSubmit"],ke={class:"grid grid-cols-12 gap-5"},Se={class:"col-span-6"},Ve=c(()=>e("label",{for:"name",class:"mb-2 block text-sm font-medium text-gray-500"},"Name",-1)),Ce={key:0,class:"text-sm text-red-500 mt-1"},Ue={class:"col-span-6"},Be=c(()=>e("label",{for:"client_id",class:"mb-2 block text-sm font-medium text-gray-500"},"Client",-1)),Fe={key:0,class:"text-sm text-red-500 mt-1"},Pe={class:"col-span-12 sm:col-span-6"},Te=c(()=>e("label",{for:"species",class:"mb-2 block text-sm font-medium text-gray-500"},"Species",-1)),Ie={key:0,class:"text-sm text-red-500 mt-1"},Ne={class:"col-span-12 sm:col-span-6"},Me=c(()=>e("label",{for:"breed",class:"mb-2 block text-sm font-medium text-gray-500"},"Breed",-1)),Ae={class:"col-span-8 sm:col-span-10"},De=c(()=>e("label",{for:"gender",class:"mb-2 block text-sm font-medium text-gray-500"},"Gender",-1)),Ee=c(()=>e("option",{disabled:"",selected:""},"Select Gender",-1)),je=c(()=>e("option",{value:"male"},"Male",-1)),Oe=c(()=>e("option",{value:"female"},"Female",-1)),Re=c(()=>e("option",{value:"none"},"None",-1)),Ge=[Ee,je,Oe,Re],$e={class:"col-span-4 sm:col-span-2"},qe=c(()=>e("label",{for:"age",class:"mb-2 block text-sm font-medium text-gray-500"},"Age",-1)),Le={class:"col-span-12"},He={class:"mx-auto max-w-full"},ze=c(()=>e("label",{for:"photo",class:"mb-2 block text-sm font-medium text-gray-500"},"Pet Photo",-1)),Je=["onDrop"],Qe={class:"space-y-1 text-center"},Ke={class:"mx-auto inline-flex h-20 w-20 items-center justify-center rounded-full bg-gray-100"},We=["src"],Xe={key:1},Ye=c(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 text-gray-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})],-1)),Ze=[Ye],et=c(()=>e("div",{class:"text-gray-600"},[e("a",{href:"#",class:"font-medium text-indigo-500 hover:text-indigo-700"},"Click to upload"),B(" or drag and drop ")],-1)),tt=c(()=>e("p",{class:"text-sm text-gray-500"},"PNG or JPG (max. 1mb)",-1)),st={key:0,class:"text-sm text-red-500 mt-1"},ot={class:"col-span-12"},at=["disabled"],lt={class:"max-w-full px-2 py-10 sm:px-0"},it={__name:"Edit",props:{pet:{type:Object,required:!0}},setup(y){const S=p(!1),m=p(null),F=p([]),u=p(null),h=p(null),P=p([]),T=p([]),V=p(!1),g=p(null),G=p(["Vaccinations","Medical History","Medications","Surgical History","Gallery"]),D=Y(),$=p(null),{pet:v}=Z().props,l=y,o=ee({name:l.pet.name,species_id:l.pet.species_id,breed_id:l.pet.breed_id,age:l.pet.age,gender:l.pet.gender,photo:{file:null,url:l.pet.photo},client_id:l.pet.client_id});m.value=l.pet.client?{id:l.pet.client_id,name:l.pet.client.name}:null,u.value=l.pet.species?{id:l.pet.species_id,name:l.pet.species.name}:null,h.value=l.pet.breed?{id:l.pet.breed_id,name:l.pet.breed.name}:null;const q=a=>{g.value=a.target.files[0],g.value&&(o.photo={file:g.value,url:URL.createObjectURL(g.value)})},L=a=>{g.value=a.dataTransfer.files[0],g.value&&($.value=URL.createObjectURL(g.value))},H=async()=>{const a=await axios.get("/pets/fetchAllClients");F.value=a.data.slice(0,10)},z=async a=>{const t=await axios.get("/pets/users",{params:{name:a}});F.value=t.data.slice(0,10)},J=async()=>{if(S.value=!0,_e(o),Object.keys(r.value).length>0){D.error("Please correct the errors in the form."),S.value=!1;return}const a=new FormData;let t={...o,...o.value};t.species_id=u.value?u.value.id:null,t.breed_id=h.value?h.value.id:null,t.client_id=m.value?m.value.id:null;for(let _ in t)t[_]!==null&&t[_]!==""&&(_==="photo"&&t.photo&&t.photo.file instanceof File?a.append(_,t.photo.file):_!=="photo"&&a.append(_,t[_]));const i=await axios.post(`/pets/${v.id}`,a,{headers:{"Content-Type":"multipart/form-data"}});D.success(i.data.message),S.value=!1},Q=async a=>{const t=await axios.get("/pets/species",{params:{name:a}});P.value=t.data.slice(0,10),await U()},K=async()=>{const a=await axios.get("/pets/fetchAllSpecies");P.value=a.data,await U()},E=()=>{m.value?o.client_id=m.value.id:o.client_id=""},j=()=>{u.value&&(o.species_id=u.value.id)},W=async a=>{V.value=!0;const t=await axios.get("/pets/fetchAllBreeds",{params:{species_id:a}});T.value=t.data,await U(),V.value=!1},X=async()=>{V.value=!0;const a=await axios.get("/pets/fetchAllBreeds",{params:{species_id:u.value.id}});T.value=a.data,await U(),V.value=!1};return I(m,()=>{m.value?E():o.client_id=""}),I(u,()=>{u.value?(j(),W(u.value.id)):o.species_id=""}),I(h,()=>{h.value&&(o.breed_id=h.value.id)}),te(async()=>{r.value={},await H(),await K(),await X(),me(o)}),(a,t)=>(f(),O(de,{title:"Edit Pet"},{header:n(()=>[e("h2",xe," Edit Pet: "+x(s(v).name),1)]),default:n(()=>[e("div",ye,[e("form",{onSubmit:N(J,["prevent"]),enctype:"multipart/form-data",class:"space-y-5"},[e("div",ke,[e("div",Se,[Ve,M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>o.name=i),type:"text",id:"name",class:w(["block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-700 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500 placeholder:text-sm",{"border-red-500 focus:border-red-500 focus:ring-red-500":s(r).name}]),placeholder:"Pet Name"},null,2),[[R,o.name]]),s(r).name?(f(),b("div",Ce,x(s(r).name),1)):C("",!0)]),e("div",Ue,[Be,d(s(A),{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=i=>m.value=i),class:w({error:s(r).client_id}),options:F.value,multiple:!1,"clear-on-select":!0,placeholder:"Type to search",label:"name","track-by":"id",onSearchChange:z,onInput:E},{noResult:n(()=>[B(" Oops! No users found. Try a different search query. ")]),_:1},8,["modelValue","class","options"]),s(r).client_id?(f(),b("div",Fe,x(s(r).client_id),1)):C("",!0)]),e("div",Pe,[Te,d(s(A),{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=i=>u.value=i),class:w({error:s(r).species_id}),options:P.value,multiple:!1,"clear-on-select":!0,placeholder:"Type to search",label:"name","track-by":"id",onSearchChange:Q,onInput:j},{noResult:n(()=>[B(" Oops! No species found. Try a different search query. ")]),_:1},8,["modelValue","class","options"]),s(r).species_id?(f(),b("div",Ie,x(s(r).species_id),1)):C("",!0)]),e("div",Ne,[Me,d(s(A),{modelValue:h.value,"onUpdate:modelValue":t[3]||(t[3]=i=>h.value=i),options:T.value,multiple:!1,"clear-on-select":!0,placeholder:"Type to search",label:"name","track-by":"id"},{noResult1:n(()=>[B(" Oops! No breeds found. Try a different search query. ")]),_:1},8,["modelValue","options"])]),e("div",Ae,[De,M(e("select",{"onUpdate:modelValue":t[4]||(t[4]=i=>o.gender=i),id:"gender",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-700 disabled:cursor-not-allowed disabled:bg-gray-50"},Ge,512),[[se,o.gender]])]),e("div",$e,[qe,M(e("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>o.age=i),type:"number",id:"age",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",placeholder:"1"},null,512),[[R,o.age]])]),e("div",Le,[e("div",He,[ze,e("label",{onDragover:t[6]||(t[6]=N(()=>{},["prevent"])),onDrop:N(L,["prevent"]),class:w(["flex w-full cursor-pointer appearance-none items-center justify-center rounded-md border-2 border-dashed border-gray-200 p-6 transition-all hover:border-indigo-700",{"border-red-500 focus:border-red-500 focus:ring-red-500":s(r).photo}])},[e("div",Qe,[e("div",Ke,[o.photo&&o.photo.url?(f(),b("img",{key:0,src:o.photo.url,alt:"Pet Photo",class:"h-20 w-20 rounded-full"},null,8,We)):(f(),b("div",Xe,Ze))]),et,tt]),e("input",{onChange:q,id:"photo",name:"photo",type:"file",class:"sr-only"},null,32)],42,Je),s(r).photo?(f(),b("div",st,x(s(r).photo),1)):C("",!0)])]),e("div",ot,[e("button",{type:"submit",disabled:S.value,class:"w-full rounded-lg border border-indigo-700 bg-indigo-700 px-8 py-4 text-center text-lg font-medium text-white shadow-sm transition-all hover:border-indigo-800 hover:bg-indigo-800 disabled:cursor-not-allowed disabled:border-indigo-300 disabled:bg-indigo-300"}," Edit Pet ",8,at)])])],40,we)]),e("div",lt,[d(s(be),null,{default:n(()=>[d(s(he),{class:"flex flex-col sm:flex-row space-x-1 rounded-xl bg-blue-900/20 p-1"},{default:n(()=>[(f(!0),b(ae,null,oe(G.value,i=>(f(),O(s(ge),{as:"template",key:i},{default:n(({selected:_})=>[e("button",{class:w(["w-full rounded-lg py-2.5 text-sm font-medium leading-5","ring-white/60 ring-offset-2 focus:outline-none focus:ring-2",_?"bg-white text-indigo-700 shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"])},x(i),3)]),_:2},1024))),128))]),_:1}),d(s(ve),null,{default:n(()=>[d(s(k),{class:"mt-2"},{default:n(()=>[d(ne,{pet:s(v)},null,8,["pet"])]),_:1}),d(s(k),{class:"mt-2"},{default:n(()=>[d(ce,{pet:s(v)},null,8,["pet"])]),_:1}),d(s(k),{class:"mt-2"},{default:n(()=>[d(re,{pet:s(v)},null,8,["pet"])]),_:1}),d(s(k),{class:"mt-2"},{default:n(()=>[d(ue,{pet:s(v)},null,8,["pet"])]),_:1}),d(s(k),{class:"mt-2"},{default:n(()=>[d(pe,{pet:s(v)},null,8,["pet"])]),_:1})]),_:1})]),_:1})])]),_:1}))}},kt=fe(it,[["__scopeId","data-v-5cdad304"]]);export{kt as default};
